---
title: 闭包
date: 2018-04-22 12:57:59
tags:
---

## 执行环境

1. 后台的每个执行环境都有一个表示变量的对象——变量对象（VO）
2. 一个函数创建时，会创建一个包含了全局变量对象的作用域链。
3. 函数执行时，创建了执行环境和作用域链， 然后使用 arguments 和其他命名参数的值来初始化函数的活动对象推到作用域链的顶端。函数执行完毕后，其执行环境的作用域链就会被销毁（此时本地活动对象也会被销毁），内存中仅保存全局作用域。
3. 闭包的情况有所不同。

## 闭包

1. 闭包被返回后，其作用域链包含外部函数的活动对象和全局变量对象。
2. 返回闭包的函数执行完毕后 其活动对象不会被销毁，仍旧会被保存在内存中，因为闭包的作用域链仍然在引用这个活动对象。
3. 直到闭包被销毁后，外部函数的活动对象才会被释放销毁。

## 闭包的缺点

1. 占用更多内存，谨慎使用。

## 什么是闭包

1. 有权访问另一个函数作用域变量的函数

## 闭包的使用场景

某个变量不想被外部访问和改变的时候（封装变量）

